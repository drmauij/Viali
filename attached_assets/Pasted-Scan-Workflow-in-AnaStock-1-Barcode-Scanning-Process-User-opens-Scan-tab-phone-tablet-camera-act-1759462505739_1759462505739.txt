Scan Workflow in AnaStock
1. Barcode Scanning Process

User opens Scan tab → phone/tablet camera activates.

Barcode scanner framework (e.g. ZXing, Dynamsoft, or native iOS/Android API) detects 1D (EAN, UPC, Code128, GS1-128) or 2D (QR, DataMatrix) codes.

When a barcode is captured:

Decode → get GTIN (Global Trade Item Number) or internal code.

Lookup in AnaStock’s Item Database (see below).

If match found → show Item Quick Panel.

If not found → allow user (with Admin rights) to register a new item with that barcode.

2. Item Database (Data Bank)

Primary Source: Each hospital’s Item master inside AnaStock.

When an item is created (by Pharmacy/Admin), it is assigned:

GTIN/Barcode(s) (one or more per item).

Name, Unit, Pack size, Vendor, Critical/Controlled flags.

Min/Max thresholds, default location(s).

Multiple barcodes per item are supported (e.g. Propofol 200 mg vial vs. 5-vial pack).

Hospital-specific database → each hospital has its own item registry (but cross-hospital admins can import/export catalogs).

Optional enhancements:

If GTIN not in local database, the system could query GS1 Global Registry or local formularies to auto-populate drug info.

For consumables (e.g. syringes), codes often come from the vendor catalog loaded into AnaStock.

3. User Experience
Scenario A: Known item

User scans barcode on Propofol 200mg vial.

App matches GTIN → “Propofol 200mg / 10ml vial” is displayed.

On-hand: 18 units / Min: 20 / Max: 60 → Below Min warning.

User can immediately: +1, −1, Set Count, Add Lot (with expiry).

Scenario B: New item (unknown code)

User scans barcode → No match found.

App shows:

“This item is not in your hospital database.”

[Add New Item] (Admin only).

Admin can enter name, unit, vendor, pack size, Min/Max.

Item now stored with that barcode for future scans.

4. Where the Data Lives

AnaStock Database: The single source of truth.

Stores all items, their barcodes, lots, and locations.

Scoped by hospital_id to keep hospitals’ data separate.

Vendors / External sources (optional):

Hospitals can import vendor catalogs (CSV/Excel) to pre-fill barcodes and item info.

If integrated, AnaStock can auto-match new scans against the vendor’s GTIN list.

5. Safety & Compliance Features

Duplicate barcode detection: warn if barcode already linked to another item.

Controlled substances: scanning requires 2nd user sign-off for stock adjustments.

Offline mode:

Item database is cached locally on device.

If scan happens offline → lookup is done from cache.

Sync updates when connection restored.

✅ Summary:

The scan matches a barcode → item record in AnaStock’s hospital-specific database.

Data is not global, but each hospital builds/maintains its own catalog (with optional vendor/GS1 integration).

If barcode unknown → Admin can register it instantly.

This ensures accuracy, speed, and traceability for every drug/consumable.